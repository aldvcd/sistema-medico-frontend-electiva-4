<div class="container mt-5">
    <div class="row">
        <div class="col">
            <h2 style="text-align: start;">Detalle de Ficha Médica</h2>
        </div>
        <div class="col" style="text-align: end;">
            <button class="btn btn-outline-secondary"   (click)="navigateToBack()">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-left" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M6 12.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6.5 2h8A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 12.5v-2a.5.5 0 0 1 1 0z"/>
                    <path fill-rule="evenodd" d="M.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L1.707 7.5H10.5a.5.5 0 0 1 0 1H1.707l2.147 2.146a.5.5 0 0 1-.708.708z"/>
                </svg>
            </button>
        </div>
    </div>
    

    <div *ngIf="ficha" class="card">
        <div class="card-body">
            <h5 class="card-title">Detalle de Ficha Médica</h5>
            <div class="mb-3">
                <h6>Paciente:  {{ ficha.paciente?.nombre }} {{ ficha.paciente?.apellido }}</h6>
            </div>
            <div class="mb-3">
                <h6>Médico:</h6>
                <select id="medicoId" class="form-select" [(ngModel)]="ficha.medicoId" [disabled]="!edicionHabilitada">
                    <option *ngFor="let medico of medicos" [value]="medico.id">
                        {{ medico.nombre }} {{ medico.apellido }}
                    </option>
                </select>
            </div>
            <form>
                <div class="mb-3">
                    <label for="motivoConsulta" class="form-label">Motivo de Consulta</label>
                    <input
                        type="text"
                        id="motivoConsulta"
                        class="form-control"
                        [(ngModel)]="ficha.motivoConsulta"
                        name="motivoConsulta"
                        [disabled]="!edicionHabilitada"
                    />
                </div>
                <div class="mb-3">
                    <label for="diagnostico" class="form-label">Diagnóstico</label>
                    <input
                        type="text"
                        id="diagnostico"
                        class="form-control"
                        [(ngModel)]="ficha.diagnostico"
                        name="diagnostico"
                        [disabled]="!edicionHabilitada"
                    />
                </div>
                <div class="mb-3">
                    <label for="tratamiento" class="form-label">Tratamiento</label>
                    <input
                        type="text"
                        id="tratamiento"
                        class="form-control"
                        [(ngModel)]="ficha.tratamiento"
                        name="tratamiento"
                        [disabled]="!edicionHabilitada"
                    />
                </div>
                <div class="mb-3">
                    <label for="detallesConsulta" class="form-label">Detalles de Consulta</label>
                    <textarea
                        id="detallesConsulta"
                        class="form-control"
                        [(ngModel)]="ficha.detallesConsulta"
                        name="detallesConsulta"
                        [disabled]="!edicionHabilitada"
                    ></textarea>
                </div>

                <div class="d-flex justify-content-between">
                    <button type="button" class="btn btn-secondary" *ngIf="!edicionHabilitada" (click)="habilitarEdicion()">
                        Editar
                    </button>
                    <button type="button" class="btn btn-primary" *ngIf="edicionHabilitada" (click)="actualizarFicha()">
                        Guardar
                    </button>
                    <button type="button" class="btn btn-danger" *ngIf="edicionHabilitada" (click)="cancelarEdicion()">
                        Cancelar
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
